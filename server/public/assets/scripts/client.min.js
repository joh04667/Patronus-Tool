/*! patronus 2016-04-22 */
var app=angular.module("MyApp",[]);app.controller("Main",["$scope","$http",function(a,b){a.patroniList=[],a.peopleList=[],a.select={},a.selectedPatronus={},a.selectedPerson={},a.matchedPeople=[],a.alphabetizeByKey=function(a,b){return a.sort(function(a,c){return a[b]<c[b]?-1:a[b]>c[b]?1:0})},a.getPatroni=function(){b.get("/patroni").then(function(b){a.patroniList=b.data,a.alphabetizeByKey(a.patroniList,"patronus_name")})},a.getPeople=function(){b.get("/people").then(function(b){b.data.forEach(function(b){a.alphabetizeByKey(b,"first_name")}),a.peopleList=b.data[0],a.matchedPeople=a.chunk(b.data[1],4)})},a.match=function(){b.put("/people/"+a.selectedPerson,a.selectedPatronus).then(function(b){a.getPeople()})},a.chunk=function(a,b){for(var c=[],d=0;d<a.length;d+=b)c.push(a.slice(d,d+b));return c},a.getPatroni(),a.getPeople()}]),app.controller("PeopleInputController",["$scope","$http",function(a,b){a.person="",a.getPeople=function(){a.$parent.getPeople()},parseName=function(a){console.log(a);var b=a.match(/^(\S+)\s*(\S+)?$/i);return{first_name:b[1],last_name:b[2]?b[2]:""}},a.postPeople=function(){b.post("/people",parseName(a.person)).then(function(b){a.person="",a.getPeople()})}}]),app.controller("PatronusInputController",["$scope","$http",function(a,b){a.patronus={},a.getPatroni=function(){a.$parent.getPatroni()},a.postPatroni=function(){console.log("controller works",a.patronus),b.post("/patroni",a.patronus).then(function(b){a.patronus={},a.getPatroni()})}}]);